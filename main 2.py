import vk_api, json
from vk_api.keyboard import VkKeyboard, VkKeyboardColor
from vk_api.bot_longpoll import VkBotLongPoll, VkBotEventType
import datetime
import re

cmds = ['kick', '–∫–∏–∫']

vk_session = vk_api.VkApi(token = "bd0bad70d5169d9d298b705ca5e159f1a4d34dc272287969dc8da141892d84d517d06d0ab084e5c5f68ed")
longpoll = VkBotLongPoll(vk_session, 213308439)

def sender(id, text):
    vk_session.method('messages.send', {'chat_id' : id, 'message' : text, 'random_id' : 0})


def kikuser(id, user):
    vk_session.method("messages.removeChatUser", {"chat_id": id, "user_id": user, "random_id": 0})


for event in longpoll.listen():
    if event.type == VkBotEventType.MESSAGE_NEW:
        if event.from_chat:
            id = event.chat_id
            msg = event.object.message['text']
            cmd = msg.split(' ')[0].replace('/', '')
            iduser = event.message.get('from_id')

            if cmd in cmds and '[' in msg and ']' in msg:
                try:
                    idd = re.findall(rf'/{cmd} \[id(\d*)\|.*]', msg)[0]
                    try:
                        msg1 = msg.split(' ')[2]
                        msg4 = msg.split(' ')[3]
                        if msg4 == '1':
                            biba = '–° –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è'
                        if msg4 == '0':
                            biba = '–ë–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è'
                        kikuser(id, idd)
                        sender(id, f"@id{idd}(–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) —É—Å–ø–µ—à–Ω–æ –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ –±–µ—Å–µ–¥—ã.\n–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: @id{iduser}(–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)\n"
                                   f"–î–∞—Ç–∞:  {datetime.datetime.now().strftime(' %d.%m.%Y')}\n–í—Ä–µ–º—è:{datetime.datetime.now().strftime(' %H:%M:%S')}\n"
                                   f"–ü—Ä–∏—á–∏–Ω–∞: {msg1}\n–¢–∏–ø –∫–∏–∫–∞: {biba}")
                        sender(15, f"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å ID {iduser} –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫–æ–º–∞–Ω–¥—É –∫–∏–∫ –¥–ª—è {idd}\n"
                                   f"–ë–µ—Å–µ–¥–∞ –≤ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: {id}\n"
                                   f"–°–æ–æ–±—â–µ–Ω–∏–µ: {msg}"
                                   f"–ü—Ä–∏—á–∏–Ω–∞: {msg1}")
                    except:
                        msg3 = msg.split(' ')[2]
                        if msg3 == '1':
                            boba = '–° –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è'
                        if msg3 == '0':
                            boba = '–ë–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è'
                        kikuser(id, idd)
                        sender(id,
                               f"@id{idd}(–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) —É—Å–ø–µ—à–Ω–æ –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ –±–µ—Å–µ–¥—ã.\n–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: @id{iduser}(–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)\n"
                               f"–î–∞—Ç–∞:  {datetime.datetime.now().strftime(' %d.%m.%Y')}\n–í—Ä–µ–º—è:{datetime.datetime.now().strftime(' %H:%M:%S')}\n"
                               f"–ü—Ä–∏—á–∏–Ω–∞: –ù–µ—Ç –ø—Ä–∏—á–∏–Ω—ã\n–¢–∏–ø –∫–∏–∫–∞: {boba}")
                        sender(15, f"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä @id{iduser} –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫–æ–º–∞–Ω–¥—É –∫–∏–∫ –¥–ª—è {idd}\n"
                                   f"–ë–µ—Å–µ–¥–∞ –≤ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: {id}\n"
                                   f"–°–æ–æ–±—â–µ–Ω–∏–µ: {msg}")
                except:
                    sender(id, f'@id{iduser}(–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä), –∑–∞ —ç—Ç–æ —Ç–µ–±—è –º–æ–≥—É—Ç —Å–Ω—è—Ç—å!\n\n–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:'
                               f'\n1. –í—ã –ø–æ–ø—ã—Ç–∞–ª–∏—Å—å –∫–∏–∫–Ω—É—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ —Å—Ç–∞—Ä—à–µ –í–∞—Å —Ä–∞–Ω–≥–æ–º.\n'
                               f'2. –í—ã –Ω–µ —É–∫–∞–∑–∞–ª–∏ –ø—Ä–∏—á–∏–Ω—É –¥–ª—è –∫–∏–∫–∞\n'
                               f'3. –í—ã –Ω–µ —É–∫–∞–∑–∞–ª–∏ —Ç–∏–ø –∫–∏–∫–∞')
                    sender(15, f"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä @id{iduser} –ø–æ–ø—ã—Ç–∞–ª—Å—è –∫–∏–∫–Ω—É—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ —á–ª–µ–Ω–æ–≤ whitelist\n"
                               f"–ë–µ—Å–µ–¥–∞ –≤ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: {id}\n"
                               f"–°–æ–æ–±—â–µ–Ω–∏–µ: {msg}")

            if msg in ['/time']:
                sender(id, f"–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –∏ –¥–∞—Ç–∞. \n\n–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ –ú–æ—Å–∫–≤–µ: {datetime.datetime.now().strftime(' %H:%M:%S')}\n–î–∞—Ç–∞: {datetime.datetime.now().strftime(' %d.%m.%Y')}")
            if msg in ['/kick', '/–∫–∏–∫']:
                sender(id, '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã!\n–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /kick –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ü—Ä–∏—á–∏–Ω–∞ –¢–∏–ø –∫–∏–∫–∞ (0, 1) \n\n–£—á—Ç–∏—Ç–µ, —á—Ç–æ –≤—Å–µ –í–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–≥–∏—Ä—É—é—Ç—Å—è!\n\n–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–∞ –í–∞—Å –º–æ–≥—É—Ç —Å–Ω—è—Ç—å —Å –ø–æ—Å—Ç–∞!')
                sender(15, f'@id{iduser} –ø–æ–ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∫–∏–∫–∞\n'
                           f'–ë–µ—Å–µ–¥–∞ –≤ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: {id}\n'
                           f'–°–æ–æ–±—â–µ–Ω–∏–µ: {msg}')
            if msg == 'test':
                sender(id, f"{datetime.datetime.now().strftime('%H:%M:%S')}")
                sender(15, f"–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")

            if msg in ['/help', '/—Ö–µ–ª–ø', '/–ø–æ–º–æ—â—å', 'help', '—Ö–µ–ª–ø', '–ø–æ–º–æ—â—å']:
                sender(id, f'üîë  –ö–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—é:\n\n'
                           f'/setowner - –≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏\n'
                           f'/setspecadmin - –≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏\n'
                           f'/hallotext - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è\n/setting - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–µ—Ä–µ—Ü–∏–∏\n'
                           f'/checkpublick - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –≥—Ä—É–ø–ø—É\n\n'
                           f'‚öô  –ö–æ–º–∞–Ω–¥—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:\n\n'
                           f'/rkick - –∏—Å–∫–ª—é—á–∏—Ç—å –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã—Ö –∏–Ω–≤–∞–π—Ç–Ω—É–ª–∏ –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥\n/setadmin - –¥–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞\n'
                           f'/addfilter - –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ –≤ —Ñ–∏–ª—å—Ç–µ—Ä\n/addmentionlist - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—Ä–µ—Ç –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞\n\n'
                           f'‚öî  –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:\n\n'
                           f'/setmoderation - –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞\n/removeroles - —Å–Ω—è—Ç—å –ø—Ä–∏–≤–µ–ª–µ–≥–∏–∏\n'
                           f'/setnick - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–º—è –∏–≥—Ä–æ–∫—É\n/nicklist - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∏–∫–æ–≤\n/removenick - —Å–Ω—è—Ç—å –Ω–∏–∫ –∏–≥—Ä–æ–∫–∞\n'
                           f'/getnick - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∏–∫\n/getnicksuser - –ø–æ–ª—É—á–∏—Ç—å –≤–∫–æ–Ω—Ç–∞–∫—Ç–µ –∏–≥—Ä–æ–∫–∞ —á–µ—Ä–µ–∑ –Ω–∏–∫\n\n'
                           f'üîß  –ö–æ–º–∞–Ω–¥—ã –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞:\n\n'
                           f'/mute - –≤—ã—Å—Ç–∞–≤–∏—Ç—å –∑–∞—Ç—ã—á–∫—É\n/unmute - —Å–Ω—è—Ç—å –∑–∞—Ç—ã—á–∫—É\n/mutelist - —Å–ø–∏—Å–æ–∫ –∑–∞–º—É—á–µ–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤\n/warn - –≤—ã–¥–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ\n'
                           f'/unwarn - —Å–Ω—è—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ\n/warnlist - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º\n/kick - –∏—Å–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n'
                           f'/ban - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n/unban - —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n/banlist - —Å–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n'
                           f'/getmute - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º—É—Ç–µ\n/getwarn - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—Ä–Ω–µ\n/checkpunish - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞–∫–∞–∑–∞–Ω–∏—è\n'
                           f'/help - —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥\n/reg - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞—Ç—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞\n/cc - –æ—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç\n/online - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω\n'
                           f'/stats - –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ–ª–æ–≤–µ–∫–∞ ')

            if msg == '/cc':
                sender(id, '–û—á–∏—Å—Ç–∏—Ç—å, –ù–µ –æ—á–∏—â–∞—Ç—å')
            elif msg in ['–û—á–∏—Å—Ç–∏—Ç—å', '–æ—á–∏—Å—Ç–∏—Ç—å']:
                sender(id, '–ù–∞—á–∏–Ω–∞—é –æ—á–∏—Å—Ç–∫—É —á–∞—Ç–∞\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;\n&#4448;')
                sender(id, '–û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!')
                sender(15, f"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä  @id{iduser} –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ —á–∞—Ç–∞.")
            elif msg in ['–ù–µ –æ—á–∏—â–∞—Ç—å', '–Ω–µ –æ—á–∏—â–∞—Ç—å']:
                sender(id, '–û—Ç–º–µ–Ω—è—é –æ—á–∏—Å—Ç–∫—É —á–∞—Ç–∞')
                sender(15, f"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä  @id{iduser} –ø–æ–ø—ã—Ç–∞–ª—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ —á–∞—Ç–∞.")

            if msg.startswith('#–∏–Ω—Ñ–∞'):
                sender(15, '–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!')
                for i in range(15, 18):
                    sender(i, f'–û–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:\n {msg}'.replace('#–∏–Ω—Ñ–∞', ''))